{"ast":null,"code":"import _regeneratorRuntime from\"/usr/share/caddy/CS260_CP4/creative-app/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/usr/share/caddy/CS260_CP4/creative-app/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/usr/share/caddy/CS260_CP4/creative-app/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Playlist=function Playlist(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),songs=_useState2[0],setSongs=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),artist=_useState6[0],setArtist=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),title=_useState8[0],setTitle=_useState8[1];var fetchSongs=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/songs/\");case 3:response=_context.sent;setSongs(response.data.songs);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setError(\"error retrieving songs: \"+_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchSongs(){return _ref.apply(this,arguments);};}();var createSong=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"/api/songs/\",{artist:artist,title:title});case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);setError(\"error adding a song: \"+_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function createSong(){return _ref2.apply(this,arguments);};}();var deleteOneSong=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(song){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/songs/\"+song.id);case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);setError(\"error deleting a song: \"+_context3.t0);case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));return function deleteOneSong(_x){return _ref3.apply(this,arguments);};}();// fetch Song data\nuseEffect(function(){fetchSongs();},[]);var addSong=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();_context4.next=3;return createSong();case 3:fetchSongs();setArtist(\"\");setTitle(\"\");case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function addSong(_x2){return _ref4.apply(this,arguments);};}();var deleteSong=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(song){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return deleteOneSong(song);case 2:fetchSongs();case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function deleteSong(_x3){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container container-fluid\",children:[/*#__PURE__*/_jsx(\"br\",{}),error,/*#__PURE__*/_jsx(\"h1\",{children:\"Add a Song\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:addSong,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"Artist:\",/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",value:artist,onChange:function onChange(e){return setArtist(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"Title:\",/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"input\",{className:\"row btn btn-secondary\",type:\"submit\",value:\"Submit\"}),/*#__PURE__*/_jsx(\"br\",{})]})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Your playlist\"}),songs.map(function(song){return/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-control playlist-container\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"playlist-image\",alt:\"music cover\",src:\"http://ec2-13-57-218-206.us-west-1.compute.amazonaws.com/CS260_CP4/creative-app/front-end/public/images/headphones.jpeg\"}),song.artist,\", \\\"\",/*#__PURE__*/_jsx(\"i\",{children:song.title}),\"\\\"\",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-sm float-right\",onClick:function onClick(e){return deleteSong(song);},children:\"Delete\"})]})})},song.id);}),/*#__PURE__*/_jsx(\"br\",{})]});};export default Playlist;","map":{"version":3,"names":["useState","useEffect","axios","Playlist","songs","setSongs","error","setError","artist","setArtist","title","setTitle","fetchSongs","get","response","data","createSong","post","deleteOneSong","song","delete","id","addSong","e","preventDefault","deleteSong","target","value","map"],"sources":["/usr/share/caddy/CS260_CP4/creative-app/front-end/src/pages/playlist.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst Playlist = () => {\n  \n  const [songs, setSongs] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [artist, setArtist] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n\n  const fetchSongs = async() => {\n    try {      \n      const response = await axios.get(\"/api/songs/\");\n      setSongs(response.data.songs);\n    } catch(error) {\n      setError(\"error retrieving songs: \" + error);\n    }\n  };\n  \n  const createSong = async() => {\n    try {\n      await axios.post(\"/api/songs/\", {artist: artist, title: title});\n    } catch(error) {\n      setError(\"error adding a song: \" + error);\n    }\n  };\n  \n  const deleteOneSong = async(song) => {\n    try {\n      await axios.delete(\"/api/songs/\" + song.id);\n    } catch(error) {\n      setError(\"error deleting a song: \" + error);\n    }\n  };\n\n  // fetch Song data\n  useEffect(() => {\n    fetchSongs();\n  },[]);\n\n  const addSong = async(e) => {\n    e.preventDefault();\n    await createSong();\n    fetchSongs();\n    setArtist(\"\");\n    setTitle(\"\");\n  };\n\n  const deleteSong = async(song) => {\n    await deleteOneSong(song);\n    fetchSongs();\n  };\n  \n    return (\n    <div className=\"main-container container-fluid\">\n        <br/>\n        {error}\n      <h1>Add a Song</h1>\n      <div className=\"form-group\">\n      <form onSubmit={addSong}>\n        <div>\n          <div>\n            Artist:\n            <input className=\"form-control\" type=\"text\" value={artist} onChange={e => setArtist(e.target.value)} />\n          </div>\n        </div>\n        <div>\n          <div>\n            Title:\n            <input className=\"form-control\" value={title} onChange={e=>setTitle(e.target.value)}></input>\n          </div>\n        </div>\n        <input className=\"row btn btn-secondary\" type=\"submit\" value=\"Submit\" /><br/>\n       </form>\n      </div>\n      <h1>Your playlist</h1>\n      {songs.map( song => (\n        <div key={song.id} className=\"form-group\">\n          <div className=\"form-control playlist-container\">\n            <p><img className='playlist-image' alt=\"music cover\" src=\"http://ec2-13-57-218-206.us-west-1.compute.amazonaws.com/CS260_CP4/creative-app/front-end/public/images/headphones.jpeg\"/> \n            {song.artist}, \"<i>{song.title}</i>\" \n            <button className=\"btn btn-secondary btn-sm float-right\" onClick={e => deleteSong(song)}>Delete</button></p>\n          </div>\n        </div>\n      ))}\n      <br/>\n    </div>\n        );\n};\n\nexport default Playlist;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}